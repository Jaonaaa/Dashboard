{"ast":null,"code":"import _toConsumableArray from\"/home/jaona/myfiles/Jaona/Components/dashboard/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/jaona/myfiles/Jaona/Components/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import{CaretDownIcon,getMaxLenghtText,getValueByIndex,removeUpper,swapToDefaultValue}from\"./functions\";import\"./style/style.sass\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Select=function Select(_ref){var _ref$optionsType=_ref.optionsType,optionsType=_ref$optionsType===void 0?[]:_ref$optionsType,name=_ref.name,onChange=_ref.onChange,fullWidth=_ref.fullWidth,title=_ref.title,_ref$caretIcon=_ref.caretIcon,caretIcon=_ref$caretIcon===void 0?/*#__PURE__*/_jsx(CaretDownIcon,{}):_ref$caretIcon,_ref$multiple=_ref.multiple,multiple=_ref$multiple===void 0?false:_ref$multiple,_ref$placeholder=_ref.placeholder,placeholder=_ref$placeholder===void 0?\"\":_ref$placeholder,_ref$defaultValue=_ref.defaultValue,defaultValue=_ref$defaultValue===void 0?undefined:_ref$defaultValue;var autoDefaultValue=optionsType.length>0?swapToDefaultValue(optionsType,defaultValue):{value:\"\",label:\"\"};var _useState=useState(autoDefaultValue),_useState2=_slicedToArray(_useState,2),selectedOption=_useState2[0],setSelectedOption=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),indexSelected=_useState4[0],setIndexSelected=_useState4[1];var longContent=useRef(null);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openOptions=_useState6[0],setOpenOptions=_useState6[1];var heightNecessary=16*2.6*optionsType.length;var maxHeight=16*2.6*5;var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),widthNecessary=_useState8[0],setWidthNecessary=_useState8[1];var longestText=getMaxLenghtText(optionsType);var handleOpen=function handleOpen(){if(openOptions)setOpenOptions(false);else setOpenOptions(true);};var handleSelectedIndex=function handleSelectedIndex(index){var selects=[];if(indexSelected.includes(index)){selects=indexSelected.filter(function(ele){return ele!==index;});}else selects=[].concat(_toConsumableArray(indexSelected),[index]);onChange({target:{name:name,value:getValueByIndex(optionsType,selects),type:\"select\"}});setIndexSelected(selects);};useEffect(function(){setSelectedOption(autoDefaultValue);if(optionsType.length>0)if(multiple&&defaultValue){var defSelect=removeUpper(defaultValue,optionsType.length);setIndexSelected(defSelect);onChange({target:{name:name,value:getValueByIndex(optionsType,defSelect),type:\"select\"}});}else onChange({target:{name:name,value:autoDefaultValue.value,type:\"select\"}});},[optionsType]);useEffect(function(){var width=longContent.current.getBoundingClientRect().width+(multiple?40:0);setWidthNecessary(width+3.4*16);},[optionsType]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"drop_down_container \".concat(fullWidth?\"fullWidth\":\"\"),children:[title&&/*#__PURE__*/_jsx(\"div\",{className:\"title_select\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"drop_down \".concat(fullWidth?\"fullWidth\":\"\"),tabIndex:0,onBlur:function onBlur(){setOpenOptions(false);},children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",value:!multiple?selectedOption.value:\"\",name:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"container_label\",onClick:handleOpen,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text\",style:{width:widthNecessary},children:[multiple?placeholder!==\"\"?placeholder:name:selectedOption.label,multiple?indexSelected.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"count\",children:[\" \",indexSelected.length]}):\"\":\"\",/*#__PURE__*/_jsx(\"div\",{className:\"hiddenText\",ref:longContent,children:longestText})]}),/*#__PURE__*/_jsx(\"div\",{className:\"icon\",style:{transform:openOptions?\"rotate(180deg)\":\"rotate(0deg)\"},children:caretIcon})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container_options \".concat(openOptions?\"box_show\":\"\"),style:{height:openOptions?heightNecessary:0,maxHeight:maxHeight},children:optionsType.map(function(option,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"option_drop_down\",onClick:function onClick(){setSelectedOption(option);if(onChange)if(multiple){handleSelectedIndex(index);}else{onChange({target:{name:name,value:option.value,type:\"select\"}});handleOpen();}},children:[multiple&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"check_round\",children:/*#__PURE__*/_jsx(\"div\",{className:\"state \".concat(indexSelected.includes(index)?\"on\":\"off\")})})}),option.label]},index);})})]})]})});};export default Select;","map":{"version":3,"names":["React","useState","useEffect","useRef","CaretDownIcon","getMaxLenghtText","getValueByIndex","removeUpper","swapToDefaultValue","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Select","_ref","_ref$optionsType","optionsType","name","onChange","fullWidth","title","_ref$caretIcon","caretIcon","_ref$multiple","multiple","_ref$placeholder","placeholder","_ref$defaultValue","defaultValue","undefined","autoDefaultValue","length","value","label","_useState","_useState2","_slicedToArray","selectedOption","setSelectedOption","_useState3","_useState4","indexSelected","setIndexSelected","longContent","_useState5","_useState6","openOptions","setOpenOptions","heightNecessary","maxHeight","_useState7","_useState8","widthNecessary","setWidthNecessary","longestText","handleOpen","handleSelectedIndex","index","selects","includes","filter","ele","concat","_toConsumableArray","target","type","defSelect","width","current","getBoundingClientRect","children","className","tabIndex","onBlur","onClick","style","ref","transform","height","map","option"],"sources":["/home/jaona/myfiles/Jaona/Components/dashboard/src/utilsComponents/Select/Select.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { CaretDownIcon, getMaxLenghtText, getValueByIndex, removeUpper, swapToDefaultValue } from \"./functions\";\r\nimport \"./style/style.sass\";\r\n\r\nconst Select = ({\r\n  optionsType = [],\r\n  name,\r\n  onChange,\r\n  fullWidth,\r\n  title,\r\n  caretIcon = <CaretDownIcon />,\r\n  multiple = false,\r\n  placeholder = \"\",\r\n  defaultValue = undefined,\r\n}) => {\r\n  const autoDefaultValue = optionsType.length > 0 ? swapToDefaultValue(optionsType, defaultValue) : { value: \"\", label: \"\" };\r\n  const [selectedOption, setSelectedOption] = useState(autoDefaultValue);\r\n  const [indexSelected, setIndexSelected] = useState([]);\r\n  const longContent = useRef(null);\r\n  const [openOptions, setOpenOptions] = useState(false);\r\n\r\n  const heightNecessary = 16 * 2.6 * optionsType.length;\r\n  const maxHeight = 16 * 2.6 * 5;\r\n\r\n  const [widthNecessary, setWidthNecessary] = useState(0);\r\n  const longestText = getMaxLenghtText(optionsType);\r\n\r\n  const handleOpen = () => {\r\n    if (openOptions) setOpenOptions(false);\r\n    else setOpenOptions(true);\r\n  };\r\n\r\n  const handleSelectedIndex = (index) => {\r\n    let selects = [];\r\n    if (indexSelected.includes(index)) {\r\n      selects = indexSelected.filter((ele) => ele !== index);\r\n    } else selects = [...indexSelected, index];\r\n\r\n    onChange({ target: { name: name, value: getValueByIndex(optionsType, selects), type: \"select\" } });\r\n    setIndexSelected(selects);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setSelectedOption(autoDefaultValue);\r\n    if (optionsType.length > 0)\r\n      if (multiple && defaultValue) {\r\n        const defSelect = removeUpper(defaultValue, optionsType.length);\r\n        setIndexSelected(defSelect);\r\n        onChange({ target: { name: name, value: getValueByIndex(optionsType, defSelect), type: \"select\" } });\r\n      } else onChange({ target: { name: name, value: autoDefaultValue.value, type: \"select\" } });\r\n  }, [optionsType]);\r\n\r\n  useEffect(() => {\r\n    let width = longContent.current.getBoundingClientRect().width + (multiple ? 40 : 0);\r\n    setWidthNecessary(width + 3.4 * 16);\r\n  }, [optionsType]);\r\n\r\n  return (\r\n    <>\r\n      <div className={`drop_down_container ${fullWidth ? \"fullWidth\" : \"\"}`}>\r\n        {title && <div className=\"title_select\">{title}</div>}\r\n        <div\r\n          className={`drop_down ${fullWidth ? \"fullWidth\" : \"\"}`}\r\n          tabIndex={0}\r\n          onBlur={() => {\r\n            setOpenOptions(false);\r\n          }}\r\n        >\r\n          <input type=\"hidden\" value={!multiple ? selectedOption.value : \"\"} name={name} />\r\n          <div className=\"container_label\" onClick={handleOpen}>\r\n            <div className=\"text\" style={{ width: widthNecessary }}>\r\n              {multiple ? (placeholder !== \"\" ? placeholder : name) : selectedOption.label}\r\n              {multiple ? indexSelected.length > 0 ? <div className=\"count\"> {indexSelected.length}</div> : \"\" : \"\"}\r\n              <div className=\"hiddenText\" ref={longContent}>\r\n                {longestText}\r\n              </div>\r\n            </div>\r\n            <div\r\n              className=\"icon\"\r\n              style={{\r\n                transform: openOptions ? `rotate(180deg)` : `rotate(0deg)`,\r\n              }}\r\n            >\r\n              {caretIcon}\r\n            </div>\r\n          </div>\r\n          <div\r\n            className={`container_options ${openOptions ? \"box_show\" : \"\"}`}\r\n            style={{\r\n              height: openOptions ? heightNecessary : 0,\r\n              maxHeight: maxHeight,\r\n            }}\r\n          >\r\n            {optionsType.map((option, index) => (\r\n              <div\r\n                className=\"option_drop_down\"\r\n                key={index}\r\n                onClick={() => {\r\n                  setSelectedOption(option);\r\n                  if (onChange)\r\n                    if (multiple) {\r\n                      handleSelectedIndex(index);\r\n                    } else {\r\n                      onChange({ target: { name: name, value: option.value, type: \"select\" } });\r\n                      handleOpen();\r\n                    }\r\n                }}\r\n              >\r\n                {multiple && (\r\n                  <>\r\n                    <div className=\"check_round\">\r\n                      <div className={`state ${indexSelected.includes(index) ? \"on\" : \"off\"}`}></div>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {option.label}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n"],"mappings":"gRAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,aAAa,CAAEC,gBAAgB,CAAEC,eAAe,CAAEC,WAAW,CAAEC,kBAAkB,KAAQ,aAAa,CAC/G,MAAO,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE5B,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAAC,IAAA,CAUN,KAAAC,gBAAA,CAAAD,IAAA,CATJE,WAAW,CAAXA,WAAW,CAAAD,gBAAA,UAAG,EAAE,CAAAA,gBAAA,CAChBE,IAAI,CAAAH,IAAA,CAAJG,IAAI,CACJC,QAAQ,CAAAJ,IAAA,CAARI,QAAQ,CACRC,SAAS,CAAAL,IAAA,CAATK,SAAS,CACTC,KAAK,CAAAN,IAAA,CAALM,KAAK,CAAAC,cAAA,CAAAP,IAAA,CACLQ,SAAS,CAATA,SAAS,CAAAD,cAAA,uBAAGb,IAAA,CAACN,aAAa,GAAE,CAAC,CAAAmB,cAAA,CAAAE,aAAA,CAAAT,IAAA,CAC7BU,QAAQ,CAARA,QAAQ,CAAAD,aAAA,UAAG,KAAK,CAAAA,aAAA,CAAAE,gBAAA,CAAAX,IAAA,CAChBY,WAAW,CAAXA,WAAW,CAAAD,gBAAA,UAAG,EAAE,CAAAA,gBAAA,CAAAE,iBAAA,CAAAb,IAAA,CAChBc,YAAY,CAAZA,YAAY,CAAAD,iBAAA,UAAGE,SAAS,CAAAF,iBAAA,CAExB,GAAM,CAAAG,gBAAgB,CAAGd,WAAW,CAACe,MAAM,CAAG,CAAC,CAAGzB,kBAAkB,CAACU,WAAW,CAAEY,YAAY,CAAC,CAAG,CAAEI,KAAK,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC1H,IAAAC,SAAA,CAA4CnC,QAAQ,CAAC+B,gBAAgB,CAAC,CAAAK,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/DG,cAAc,CAAAF,UAAA,IAAEG,iBAAiB,CAAAH,UAAA,IACxC,IAAAI,UAAA,CAA0CxC,QAAQ,CAAC,EAAE,CAAC,CAAAyC,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/CE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IACtC,GAAM,CAAAG,WAAW,CAAG1C,MAAM,CAAC,IAAI,CAAC,CAChC,IAAA2C,UAAA,CAAsC7C,QAAQ,CAAC,KAAK,CAAC,CAAA8C,UAAA,CAAAT,cAAA,CAAAQ,UAAA,IAA9CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAElC,GAAM,CAAAG,eAAe,CAAG,EAAE,CAAG,GAAG,CAAGhC,WAAW,CAACe,MAAM,CACrD,GAAM,CAAAkB,SAAS,CAAG,EAAE,CAAG,GAAG,CAAG,CAAC,CAE9B,IAAAC,UAAA,CAA4CnD,QAAQ,CAAC,CAAC,CAAC,CAAAoD,UAAA,CAAAf,cAAA,CAAAc,UAAA,IAAhDE,cAAc,CAAAD,UAAA,IAAEE,iBAAiB,CAAAF,UAAA,IACxC,GAAM,CAAAG,WAAW,CAAGnD,gBAAgB,CAACa,WAAW,CAAC,CAEjD,GAAM,CAAAuC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvB,GAAIT,WAAW,CAAEC,cAAc,CAAC,KAAK,CAAC,CAAC,IAClC,CAAAA,cAAc,CAAC,IAAI,CAAC,CAC3B,CAAC,CAED,GAAM,CAAAS,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAIC,KAAK,CAAK,CACrC,GAAI,CAAAC,OAAO,CAAG,EAAE,CAChB,GAAIjB,aAAa,CAACkB,QAAQ,CAACF,KAAK,CAAC,CAAE,CACjCC,OAAO,CAAGjB,aAAa,CAACmB,MAAM,CAAC,SAACC,GAAG,QAAK,CAAAA,GAAG,GAAKJ,KAAK,GAAC,CACxD,CAAC,IAAM,CAAAC,OAAO,IAAAI,MAAA,CAAAC,kBAAA,CAAOtB,aAAa,GAAEgB,KAAK,EAAC,CAE1CvC,QAAQ,CAAC,CAAE8C,MAAM,CAAE,CAAE/C,IAAI,CAAEA,IAAI,CAAEe,KAAK,CAAE5B,eAAe,CAACY,WAAW,CAAE0C,OAAO,CAAC,CAAEO,IAAI,CAAE,QAAS,CAAE,CAAC,CAAC,CAClGvB,gBAAgB,CAACgB,OAAO,CAAC,CAC3B,CAAC,CAED1D,SAAS,CAAC,UAAM,CACdsC,iBAAiB,CAACR,gBAAgB,CAAC,CACnC,GAAId,WAAW,CAACe,MAAM,CAAG,CAAC,CACxB,GAAIP,QAAQ,EAAII,YAAY,CAAE,CAC5B,GAAM,CAAAsC,SAAS,CAAG7D,WAAW,CAACuB,YAAY,CAAEZ,WAAW,CAACe,MAAM,CAAC,CAC/DW,gBAAgB,CAACwB,SAAS,CAAC,CAC3BhD,QAAQ,CAAC,CAAE8C,MAAM,CAAE,CAAE/C,IAAI,CAAEA,IAAI,CAAEe,KAAK,CAAE5B,eAAe,CAACY,WAAW,CAAEkD,SAAS,CAAC,CAAED,IAAI,CAAE,QAAS,CAAE,CAAC,CAAC,CACtG,CAAC,IAAM,CAAA/C,QAAQ,CAAC,CAAE8C,MAAM,CAAE,CAAE/C,IAAI,CAAEA,IAAI,CAAEe,KAAK,CAAEF,gBAAgB,CAACE,KAAK,CAAEiC,IAAI,CAAE,QAAS,CAAE,CAAC,CAAC,CAC9F,CAAC,CAAE,CAACjD,WAAW,CAAC,CAAC,CAEjBhB,SAAS,CAAC,UAAM,CACd,GAAI,CAAAmE,KAAK,CAAGxB,WAAW,CAACyB,OAAO,CAACC,qBAAqB,CAAC,CAAC,CAACF,KAAK,EAAI3C,QAAQ,CAAG,EAAE,CAAG,CAAC,CAAC,CACnF6B,iBAAiB,CAACc,KAAK,CAAG,GAAG,CAAG,EAAE,CAAC,CACrC,CAAC,CAAE,CAACnD,WAAW,CAAC,CAAC,CAEjB,mBACER,IAAA,CAAAI,SAAA,EAAA0D,QAAA,cACE5D,KAAA,QAAK6D,SAAS,wBAAAT,MAAA,CAAyB3C,SAAS,CAAG,WAAW,CAAG,EAAE,CAAG,CAAAmD,QAAA,EACnElD,KAAK,eAAIZ,IAAA,QAAK+D,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAElD,KAAK,CAAM,CAAC,cACrDV,KAAA,QACE6D,SAAS,cAAAT,MAAA,CAAe3C,SAAS,CAAG,WAAW,CAAG,EAAE,CAAG,CACvDqD,QAAQ,CAAE,CAAE,CACZC,MAAM,CAAE,SAAAA,OAAA,CAAM,CACZ1B,cAAc,CAAC,KAAK,CAAC,CACvB,CAAE,CAAAuB,QAAA,eAEF9D,IAAA,UAAOyD,IAAI,CAAC,QAAQ,CAACjC,KAAK,CAAE,CAACR,QAAQ,CAAGa,cAAc,CAACL,KAAK,CAAG,EAAG,CAACf,IAAI,CAAEA,IAAK,CAAE,CAAC,cACjFP,KAAA,QAAK6D,SAAS,CAAC,iBAAiB,CAACG,OAAO,CAAEnB,UAAW,CAAAe,QAAA,eACnD5D,KAAA,QAAK6D,SAAS,CAAC,MAAM,CAACI,KAAK,CAAE,CAAER,KAAK,CAAEf,cAAe,CAAE,CAAAkB,QAAA,EACpD9C,QAAQ,CAAIE,WAAW,GAAK,EAAE,CAAGA,WAAW,CAAGT,IAAI,CAAIoB,cAAc,CAACJ,KAAK,CAC3ET,QAAQ,CAAGiB,aAAa,CAACV,MAAM,CAAG,CAAC,cAAGrB,KAAA,QAAK6D,SAAS,CAAC,OAAO,CAAAD,QAAA,EAAC,GAAC,CAAC7B,aAAa,CAACV,MAAM,EAAM,CAAC,CAAG,EAAE,CAAG,EAAE,cACrGvB,IAAA,QAAK+D,SAAS,CAAC,YAAY,CAACK,GAAG,CAAEjC,WAAY,CAAA2B,QAAA,CAC1ChB,WAAW,CACT,CAAC,EACH,CAAC,cACN9C,IAAA,QACE+D,SAAS,CAAC,MAAM,CAChBI,KAAK,CAAE,CACLE,SAAS,CAAE/B,WAAW,gCACxB,CAAE,CAAAwB,QAAA,CAEDhD,SAAS,CACP,CAAC,EACH,CAAC,cACNd,IAAA,QACE+D,SAAS,sBAAAT,MAAA,CAAuBhB,WAAW,CAAG,UAAU,CAAG,EAAE,CAAG,CAChE6B,KAAK,CAAE,CACLG,MAAM,CAAEhC,WAAW,CAAGE,eAAe,CAAG,CAAC,CACzCC,SAAS,CAAEA,SACb,CAAE,CAAAqB,QAAA,CAEDtD,WAAW,CAAC+D,GAAG,CAAC,SAACC,MAAM,CAAEvB,KAAK,qBAC7B/C,KAAA,QACE6D,SAAS,CAAC,kBAAkB,CAE5BG,OAAO,CAAE,SAAAA,QAAA,CAAM,CACbpC,iBAAiB,CAAC0C,MAAM,CAAC,CACzB,GAAI9D,QAAQ,CACV,GAAIM,QAAQ,CAAE,CACZgC,mBAAmB,CAACC,KAAK,CAAC,CAC5B,CAAC,IAAM,CACLvC,QAAQ,CAAC,CAAE8C,MAAM,CAAE,CAAE/C,IAAI,CAAEA,IAAI,CAAEe,KAAK,CAAEgD,MAAM,CAAChD,KAAK,CAAEiC,IAAI,CAAE,QAAS,CAAE,CAAC,CAAC,CACzEV,UAAU,CAAC,CAAC,CACd,CACJ,CAAE,CAAAe,QAAA,EAED9C,QAAQ,eACPhB,IAAA,CAAAI,SAAA,EAAA0D,QAAA,cACE9D,IAAA,QAAK+D,SAAS,CAAC,aAAa,CAAAD,QAAA,cAC1B9D,IAAA,QAAK+D,SAAS,UAAAT,MAAA,CAAWrB,aAAa,CAACkB,QAAQ,CAACF,KAAK,CAAC,CAAG,IAAI,CAAG,KAAK,CAAG,CAAM,CAAC,CAC5E,CAAC,CACN,CACH,CACAuB,MAAM,CAAC/C,KAAK,GAnBRwB,KAoBF,CAAC,EACP,CAAC,CACC,CAAC,EACH,CAAC,EACH,CAAC,CACN,CAAC,CAEP,CAAC,CAED,cAAe,CAAA5C,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}